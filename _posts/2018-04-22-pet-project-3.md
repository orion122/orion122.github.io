---
layout: post
title:  "Тренировочный pet-project #3"
---
По тренировочному проекту осталось написать тесты (покрыть тестами хотя бы то, что уже есть), разобраться как на фронт прокидываются данные, реализовать отправку сообщений и сохранение отправленных сообщений в БД.

Сегодня писал тесты. Тестировал экшны контролеров и вьюхи. Собственно, больше тестировать и нечего :). Вначале смотрел на уже написанный код и по нему писал тесты. Но оказалось, что легче писать тесты, смотря на описание проекта, где было подробно расписано, что должно произойти после определенного действия.

Поискал информацию по передаче данных из рельс во фронт. Похоже, что, к примеру, токен сессии должен быть присвоен атрибуту div'а, как-то так:
{% highlight erb %}
<div class="session" data-session-token="<%= @session_token %>"></div>
{% endhighlight %}
а потом в js извлечь этот токен из атрибута:
{% highlight coffeescript %}
# chat.coffee
$ ->
  $('div[data-session-token]' ).each ->
    sessionToken = $(this).data('session-token')
{% endhighlight %}
В следующий раз попробую этот вариант.
