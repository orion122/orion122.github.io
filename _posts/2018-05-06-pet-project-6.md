---
layout: post
title:  "Тренировочный pet-project #6"
---
После проверки ментора предстояло сделать следующее:
- Токен сессии должен храниться в LocalStorage
- Убрать токен сессии из URL
- Начать пользоваться шаблонизатором (slim, либо haml)
- Отказаться от websocket. Сохранять сообщения через обычное API
- Добавить связь между чатом и сообщениями, для более удобного и быстрого обращения к сообщениям
- Добавить статусы сообщений (State Machine)
- Прочитать про i18n и применить
- К чату должны иметь доступ только два посетителя
- Подправить роуты
- Исправить и добавить тесты


На данный момент реализовано все кроме i18n, тестов и частично статусов сообщений.

Токены сессий перезаписываются в переменную хранящуюся в LocalStorage и передаются в контроллер в хедере. Благодаря этому токен сессии в URL не появляется.
В качестве шаблонизатора выбрал slim.

Полезные ссылки:
- [Template language Slim](https://github.com/slim-template/slim)
- [Шаблонизатор Slim — альтернатива Haml'y](https://habr.com/post/128645/)
- [AASM - State machines for Ruby classes](https://github.com/aasm/aasm)
- [State machines in Rails 5](https://medium.com/geogo-in/state-machines-in-rails-5-45259a4f42da)
- [Роутинг в Rails](http://rusrails.ru/rails-routing)
